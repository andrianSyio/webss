<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>WebSS — Screenshot API</title>
  <meta name="description" content="Ambil screenshot halaman web via API" />
  <style>
    :root{--bg:#f6f8fb;--card:#ffffff;--muted:#7b8794;--accent:#6aa7d8}
    *{box-sizing:border-box}body{margin:0;background:linear-gradient(180deg,var(--bg),#eef6ff);font-family:Inter,system-ui,Segoe UI,Roboto,Arial;color:#1b2430;display:flex;align-items:center;justify-content:center;min-height:100vh;padding:20px}
    .wrap{width:100%;max-width:480px}
    .card{background:var(--card);border-radius:16px;padding:18px;box-shadow:0 10px 30px rgba(20,30,60,0.06)}
    .logo{width:52px;height:52px;border-radius:12px;background:linear-gradient(135deg,var(--accent),#b7d7e8);display:flex;align-items:center;justify-content:center;color:white;font-weight:700;font-size:18px;margin-bottom:12px}
    h1{margin:0;font-size:20px}
    p.lead{margin:6px 0 14px;color:var(--muted);font-size:13px}
    .row{display:flex;gap:10px}
    input[type=url],input[type=number],select{flex:1;padding:10px;border-radius:10px;border:1px solid #e8eef6;background:rgba(255,255,255,0.9);outline:none;font-size:14px}
    .small{width:96px}
    button.btn{padding:10px 14px;border-radius:10px;background:linear-gradient(90deg,var(--accent),#b7d7e8);color:white;border:0;font-weight:700;cursor:pointer}
    .options{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px}
    .preview{margin-top:14px;border-radius:12px;border:1px solid #eef3fb;overflow:hidden;background:#fff;min-height:180px;display:flex;align-items:center;justify-content:center;color:var(--muted);padding:12px}
    footer{margin-top:12px;text-align:center;color:var(--muted);font-size:13px}
    @media(max-width:420px){.row{flex-direction:column}.small{width:100%}}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <div class="logo">WS</div>
      <h1>WebSS — Screenshot API</h1>
      <p class="lead">Masukkan URL lalu tekan Capture. Pilih full-page jika ingin seluruh halaman.</p>

      <div style="display:flex;gap:8px;align-items:center">
        <input id="url" type="url" placeholder="https://example.com" value="https://google.com" />
        <button id="go" class="btn">Capture</button>
      </div>

      <div class="options">
        <input id="width" class="small" type="number" placeholder="width" value="1280" />
        <input id="height" class="small" type="number" placeholder="height" value="720" />
        <label style="display:flex;align-items:center;gap:8px;padding:8px;background:#f7fbff;border-radius:10px;border:1px solid #eef6fb">
          <input id="fullPage" type="checkbox" /> Full page
        </label>
        <select id="format" style="padding:8px;border-radius:10px;border:1px solid #eef6fb;">
          <option value="png">PNG</option>
          <option value="jpeg">JPEG</option>
        </select>
      </div>

      <div id="preview" class="preview">No screenshot yet — tekan Capture</div>
      <footer>Built for Vercel • Node 22</footer>
    </div>
  </div>

  <script>
    const $ = id => document.getElementById(id);
    async function capture() {
      const url = $('url').value.trim();
      if (!url) { alert('Masukkan URL'); return; }
      const width = $('width').value || '1280';
      const height = $('height').value || '720';
      const fullPage = $('fullPage').checked;
      const format = $('format').value;
      const api = `/api/screenshot?url=${encodeURIComponent(url)}&width=${width}&height=${height}&fullPage=${fullPage}&format=${format}`;

      $('preview').textContent = 'Loading…';
      try {
        const res = await fetch(api);
        if (!res.ok) {
          const j = await res.json().catch(()=>null);
          $('preview').textContent = j && j.error ? 'Error: ' + j.error : 'Request failed ' + res.status;
          return;
        }
        const blob = await res.blob();
        const urlObj = URL.createObjectURL(blob);
        $('preview').innerHTML = `<img src="${urlObj}" style="width:100%;height:auto;display:block" alt="screenshot">`;
      } catch (err) {
        $('preview').textContent = 'Network error: ' + err.message;
      }
    }
    $('go').addEventListener('click', capture);
    $('url').addEventListener('keydown', e => { if (e.key === 'Enter') capture(); });
  </script>
</body>
</html>
